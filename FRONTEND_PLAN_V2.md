### **前端开发计划 (优化版 V2)**

---

#### **第一阶段：项目初始化与技术选型**

**目标**：搭建一个使用 Ant Design 的现代化、健壮的开发环境。

1.  **初始化项目**:
    *   使用 **Vite** 作为构建工具。
    *   选择一个 **Vite + React + Electron + TypeScript** 模板来快速启动项目。

2.  **UI 框架和样式**:
    *   **UI 组件库**: 集成 **Ant Design (antd)**。我们将使用 antd 提供的丰富组件，如 `Layout`, `Menu`, `Card`, `Form`, `Modal`, `Spin`, `Steps` 等来构建专业且一致的界面。
    *   **样式方案**: 保留 **Tailwind CSS**。它将与 antd 配合使用，处理 antd 组件难以覆盖的自定义布局和微调，实现灵活高效的样式开发。

3.  **项目结构**: (与前一版计划保持不变)
    *   创建清晰的目录结构 (`electron/`, `src/components/`, `src/pages/`, `src/services/`, `src/store/`, `src/types/`, `src/hooks/`)。

---

#### **第二阶段：核心服务与状态管理**

**目标**：建立前端与后端的通信桥梁，并设计好全局数据流。

1.  **API 服务层 (`src/services/api.ts`)**: (保持不变)
    *   创建一个专门的模块来处理所有对后端 API 的请求。
    *   为后端的每一个接口创建一个对应的异步函数。

2.  **类型定义 (`src/types/index.ts`)**: (保持不变)
    *   根据后端 `schemas.py` 创建对应的 TypeScript `interface`。

3.  **全局状态管理 (`src/store/`)**: (确认使用)
    *   使用 **Zustand** 创建一个全局 Store，管理当前项目、生成的内容（人物、大纲、章节）以及全局 UI 状态（加载、错误等）。

---

#### **第三阶段：UI 页面与核心功能开发 (基于 Ant Design)**

**目标**：利用 Ant Design 的组件库，高效地实现核心界面和功能。

1.  **主布局和项目管理**:
    *   **布局**: 使用 antd 的 `<Layout>` 组件 (`<Layout>`, `<Sider>`, `<Header>`, `<Content>`) 快速搭建经典的应用布局。
    *   **导航**: 在 `<Sider>` 中使用 `<Menu>` 组件展示项目列表，并提供新建项目按钮。
    *   **项目创建**: 使用 `<Modal>` 和 `<Form>` 组件来构建“创建新项目”的弹窗表单。

2.  **创作工作区页面**:
    *   **工作流展示**: 使用 antd 的 `<Steps>` 组件在页面顶部直观地展示“人物 -> 大纲 -> 章节 -> 扩写”的四步创作流程。
    *   **模块一：人物生成**:
        *   UI: 使用 `<Form>`, `<Input>`, `<Input.TextArea>` 构建输入表单。在等待 AI 响应时，使用 `<Spin>` 组件提供加载反馈。
        *   展示: 将返回的角色信息展示在 `<Card>` 组件中。
    *   **模块二：故事大纲生成**:
        *   UI: 使用 `<Checkbox.Group>` 让用户选择参与生成大纲的角色。
        *   展示: 使用 `<Card>` 和 `<List>` 组件来格式化展示生成的故事主题、核心矛盾和情节结构。
    *   **模块三：章节规划**:
        *   UI: 使用 `<List>` 组件渲染所有章节规划，每个规划项是一个 `<Card>`，包含摘要和操作按钮（如“扩写”）。
    *   **模块四：章节扩写**:
        *   UI: 页面核心是一个简洁的文本编辑区。可以暂时使用一个支持流式更新的 `<Input.TextArea>` 或集成一个轻量级的 Markdown 编辑器。
        *   **流式响应处理**: 实现核心逻辑，实时地将流式数据追加到编辑区内，并在数据流式传输时，在旁边显示一个活动的 `<Spin indicator={...} />`，给用户明确的“正在写作”反馈。
        *   操作: 在编辑器下方提供 `<Button>`，用于“保存”、“重新生成”等。

---

#### **第四阶段：打包与优化**

**目标**：将应用打包成可执行文件，并进行最终优化。

1.  **打包配置**: (保持不变)
    *   配置 `electron-builder`，将应用打包成适用于各平台的安装包。
2.  **完善体验**: (利用 antd)
    *   **全局反馈**: 使用 antd 的 `message` 或 `notification` 组件来提供全局的成功、失败或警告提示。例如，当 API 请求失败时，弹出一个错误通知。
    *   **一致性**: 确保所有交互（加载、弹窗、表单验证）都遵循 Ant Design 的设计规范，提供统一流畅的用户体验。
